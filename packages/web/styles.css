@import 'tailwindcss';

@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

body {
  @apply m-0;
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',
    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family:
    source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
}

:root {
  --background: #FFFFFF;
  --foreground: #1D1D1F;
  --card: #FFFFFF;
  --card-foreground: #1D1D1F;
  --popover: #FFFFFF;
  --popover-foreground: #1D1D1F;
  --primary: #0062c1;
  --primary-foreground: #FFFFFF;
  --secondary: #E5E5EA;
  --secondary-foreground: #1D1D1F;
  --muted: #E5E5EA;
  --muted-foreground: #8E8E93;
  --accent: #DADADA;
  --accent-foreground: #1D1D1F;
  --destructive: #FF3B30;
  --destructive-foreground: #FFFFFF;
  --border: #E5E5EA;
  --input: #E5E5EA;
  --ring: #0062c1;
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.5rem;
  --sidebar: #f8f9f9;
  --sidebar-foreground: #373B3F;
  --sidebar-primary: #0062c1;
  --sidebar-primary-foreground: #FFFFFF;
  --sidebar-accent: #E0E3E8;
  --sidebar-accent-foreground: #373B3F;
  --sidebar-border: #f0f2f5;
  --sidebar-ring: #0062c1;
  
  /* Things accent colors */
  --things-blue: #0062c0;
  --things-yellow: #ffd400;
  --things-pink: #ef1a51;
  --things-green: #30D158;
  --things-teal: #39a89d;
  --things-beige: #ccbf7e;
  --things-grey: #8E8E93;
  --things-evening: #80a4d6;
  --things-project-sidebar: #b1b5ba;
  
  /* Dark popover colors (for dark-styled dropdowns in light mode) */
  --popover-dark: #2C2C2E;
  --popover-dark-foreground: #FFFFFF;
  --popover-dark-muted: #8E8E93;
  --popover-dark-accent: #3A3A3C;
  --popover-dark-accent-hover: #48484A;
  --popover-dark-border: #48484A;
  --popover-dark-selected: #548cd0;
  
  /* Task selection */
  --task-selected: #cae2ff;
  
  /* Hint/subtle icon color */
  --hint: #C7C7CC;
  
  /* Subtle text color (darker than muted) */
  --subtle: #6E6E73;
  
  /* Notes text color */
  --notes: #3A3A3C;
  
  /* Section divider color */
  --section-border: #dfe3e8;
  
  /* Upcoming date label text */
  --date-label: #74777c;
  
  /* Task inline details color (tags, checklist icons, etc) */
  --task-inline: #9a9ea3;
  
  /* Project progress circle color */
  --project-progress: #b1b5ba;
  
  /* Expanded task card background */
  --card-expanded: #FFFFFF;
  
  /* Scheduled date badge */
  --scheduled-badge-bg: #e6e8ec;
  --scheduled-badge-text: #5e6268;
  
  /* Toggle group */
  --toggle-selected-bg: #b6b9be;
  --toggle-selected-text: #ffffff;
  --toggle-unselected-text: #8e9196;
}

.dark {
  --background: #23262a;
  --foreground: #F5F5F7;
  --card: transparent;
  --card-foreground: #F5F5F7;
  --popover: #262a30;
  --popover-foreground: #F5F5F7;
  --primary: #254174;
  --primary-foreground: #FFFFFF;
  --secondary: #3A3A3C;
  --secondary-foreground: #F5F5F7;
  --muted: #3A3A3C;
  --muted-foreground: #98989D;
  --accent: #3A3A3C;
  --accent-foreground: #F5F5F7;
  --destructive: #FF453A;
  --destructive-foreground: #FFFFFF;
  --border: #3a3e43;
  --input: #3A3A3C;
  --ring: #254174;
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: #1d1f22;
  --sidebar-foreground: #d3d3d4;
  --sidebar-primary: #254174;
  --sidebar-primary-foreground: #FFFFFF;
  --sidebar-accent: #3c3e42;
  --sidebar-accent-foreground: #d3d3d4;
  --sidebar-border: #191b1c;
  --sidebar-ring: #254174;
  
  /* Things accent colors (adjusted for dark mode visibility) */
  --things-blue: #65abff;
  --things-yellow: #FFD60A;
  --things-pink: #FF6B6B;
  --things-green: #30D158;
  --things-teal: #64D2D2;
  --things-beige: #D4C98A;
  --things-grey: #98989D;
  --things-evening: #A0C4F0;
  --things-project-sidebar: #8E9297;
  
  /* Task selection */
  --task-selected: #254174;
  
  /* Hint/subtle icon color */
  --hint: #48484A;
  
  /* Subtle text color */
  --subtle: #98989D;
  
  /* Notes text color */
  --notes: #EBEBF0;
  
  /* Section divider color */
  --section-border: #44464a;
  
  /* Upcoming date label text */
  --date-label: #b4b5b6;
  
  /* Task inline details color (tags, checklist icons, etc) */
  --task-inline: #7b7c7e;
  
  /* Project progress circle color */
  --project-progress: #828a97;
  
  /* Expanded task card background */
  --card-expanded: #2d3033;
  
  /* Scheduled date badge */
  --scheduled-badge-bg: #44464a;
  --scheduled-badge-text: #dadadb;
  
  /* Dark popover colors (adjusted for dark mode) */
  --popover-dark: #262a30;
  --popover-dark-border: #3a3e43;
  
  /* Toggle group */
  --toggle-selected-bg: #5a5d62;
  --toggle-selected-text: #ffffff;
  --toggle-unselected-text: #8e9196;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  
  /* Things accent colors */
  --color-things-blue: var(--things-blue);
  --color-things-yellow: var(--things-yellow);
  --color-things-pink: var(--things-pink);
  --color-things-green: var(--things-green);
  --color-things-teal: var(--things-teal);
  --color-things-beige: var(--things-beige);
  --color-things-grey: var(--things-grey);
  --color-things-evening: var(--things-evening);
  --color-things-project-sidebar: var(--things-project-sidebar);
  
  /* Dark popover colors */
  --color-popover-dark: var(--popover-dark);
  --color-popover-dark-foreground: var(--popover-dark-foreground);
  --color-popover-dark-muted: var(--popover-dark-muted);
  --color-popover-dark-accent: var(--popover-dark-accent);
  --color-popover-dark-accent-hover: var(--popover-dark-accent-hover);
  --color-popover-dark-border: var(--popover-dark-border);
  --color-popover-dark-selected: var(--popover-dark-selected);
  
  /* Task selection */
  --color-task-selected: var(--task-selected);
  
  /* Hint/subtle icon color */
  --color-hint: var(--hint);
  
  /* Subtle text color */
  --color-subtle: var(--subtle);
  
  /* Notes text color */
  --color-notes: var(--notes);
  
  /* Section divider color */
  --color-section-border: var(--section-border);
  
  /* Upcoming date label text */
  --color-date-label: var(--date-label);
  
  /* Task inline details color (tags, checklist icons, etc) */
  --color-task-inline: var(--task-inline);
  
  /* Project progress circle color */
  --color-project-progress: var(--project-progress);
  
  /* Expanded task card background */
  --color-card-expanded: var(--card-expanded);
  
  /* Scheduled date badge */
  --color-scheduled-badge-bg: var(--scheduled-badge-bg);
  --color-scheduled-badge-text: var(--scheduled-badge-text);
  
  /* Toggle group */
  --color-toggle-selected-bg: var(--toggle-selected-bg);
  --color-toggle-selected-text: var(--toggle-selected-text);
  --color-toggle-unselected-text: var(--toggle-unselected-text);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  html, body {
    @apply bg-background text-foreground h-full overflow-hidden;
  }
}

/* Hydration indicator - shows app is not yet interactive */
body.hydrating::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 3px;
  width: 30%;
  background: var(--things-blue);
  animation: loading-bar 1.5s ease-in-out infinite;
  z-index: 9999;
}

@keyframes loading-bar {
  0% { left: 0; width: 30%; }
  50% { left: 40%; width: 40%; }
  100% { left: 100%; width: 10%; }
}

body.hydrating main {
  opacity: 0.6;
  pointer-events: none;
  transition: opacity 0.2s ease-out;
}

body:not(.hydrating) main {
  opacity: 1;
  transition: opacity 0.2s ease-out;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(400%);
  }
}

/* Disable View Transitions animations - we handle our own */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
}

/* ProseMirror editor styles */
.prose-editor .ProseMirror {
  outline: none;
}

.prose-editor .ProseMirror p {
  margin: 0;
}

.prose-editor .ProseMirror-focused {
  outline: none;
}

.prose-editor .ProseMirror[data-placeholder]::before {
  content: attr(data-placeholder);
  color: var(--muted-foreground);
  pointer-events: none;
  position: absolute;
}

/* Markdown styling */
.prose-editor .md-marker {
  color: var(--muted-foreground);
}

.prose-editor .md-heading-marker {
  color: var(--muted-foreground);
}

.prose-editor .md-heading-text {
  font-weight: 600;
}

.prose-editor .md-bold {
  font-weight: 600;
}

.prose-editor .md-italic {
  font-style: italic;
}

.prose-editor .md-code {
  background: var(--muted);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace;
}

.prose-editor .md-link-text {
  color: var(--things-blue);
  text-decoration: underline;
  cursor: pointer;
}

.prose-editor .md-link-url {
  color: var(--muted-foreground);
  font-size: 0.875em;
}

.prose-editor .md-url {
  color: var(--things-blue);
  text-decoration: underline;
  cursor: pointer;
}
